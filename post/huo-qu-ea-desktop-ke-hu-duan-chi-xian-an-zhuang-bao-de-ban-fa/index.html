<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>获取EA Desktop客户端离线安装包的办法 | Huiaei&#39;s Notebook</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://huiaei.github.io/favicon.ico?v=1701862531749">
<link rel="stylesheet" href="https://huiaei.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="方法


首先获取最新的在线安装包 EA Desktop Installer


使用压缩工具打开EAappInstaller.exe，得到类似下方的目录
0
u0
u1
u2



使用文本编辑工具打开第一个文件： 0


使用搜索功能或..." />
    <meta name="keywords" content="游戏,EA" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://huiaei.github.io">
        <img src="https://huiaei.github.io/images/avatar.png?v=1701862531749" class="site-logo">
        <h1 class="site-title">Huiaei&#39;s Notebook</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      用笔记本一方面把重要的记下来，另一方面，某些地方我不同意书里的讲法，可以写上一段自己的看法，表示自己的意思。 ——鲁  迅
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://huiaei.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">获取EA Desktop客户端离线安装包的办法</h2>
            <div class="post-date">2023-12-06</div>
            
            <div class="post-content" v-pre>
              <h2 id="方法">方法</h2>
<ol>
<li>
<p>首先获取最新的在线安装包 <a href="https://origin-a.akamaihd.net/EA-Desktop-Client-Download/installer-releases/EADesktopInstaller.exe">EA Desktop Installer</a></p>
</li>
<li>
<p>使用压缩工具打开<code>EAappInstaller.exe</code>，得到类似下方的目录</p>
<pre><code>0
u0
u1
u2
</code></pre>
</li>
<li>
<p>使用文本编辑工具打开第一个文件： <code>0</code></p>
</li>
<li>
<p>使用搜索功能或者翻阅的方式找到类似于下方的链接（使用换行后大约在整体的中间部分）</p>
<p><code>https://origin-a.akamaihd.net/EA-Desktop-Client-Download/installer-releases/EAapp-12.0.150.5030-639.msi</code></p>
</li>
<li>
<p>使用下载工具下载该链接即可。</p>
</li>
<li>
<p>请注意有些依赖文件，如果没有是需要下载安装的，推荐直接下载安装一遍，下载地址在发现此链接位置的附近。</p>
<p>提供一个当前<code>12.0.150.5030</code>版本的所有下载列表，顺便说一句，下载的<code>EAapp.msi</code>安装时是可以选安装位置的。</p>
<p>依赖安装完记得<strong>重启计算机</strong>。</p>
<blockquote>
<p>vcredist10.x86.exe : https://origin-a.akamaihd.net/EA-Desktop-Client-Download/installer-releases/vc_redist-10.0.40219.x86.exe</p>
</blockquote>
<blockquote>
<p>vcredist14.x86.exe ：https://origin-a.akamaihd.net/EA-Desktop-Client-Download/installer-releases/vc_redist-14.28.29325.x86.exe</p>
</blockquote>
<blockquote>
<p>vcredist14.x64.exe : https://origin-a.akamaihd.net/EA-Desktop-Client-Download/installer-releases/vc_redist-14.28.29325.x64.exe</p>
</blockquote>
<blockquote>
<p>EAapp.msi : https://origin-a.akamaihd.net/EA-Desktop-Client-Download/installer-releases/EAapp-12.0.150.5030-639.msi</p>
</blockquote>
</li>
</ol>
<h2 id="本人使用的工具">本人使用的工具</h2>
<ul>
<li>压缩工具：<a href="https://www.7-zip.org/">7zip</a></li>
<li>文本编辑工具：<a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
<li>下载工具推荐使用多线程下载工具</li>
</ul>
<h2 id="其他的说明">其他的说明</h2>
<blockquote>
<p>Q：什么时候发现的？</p>
<p>A：在2021年10月28日23时左右（UTC+8），方法可能具有时效性。</p>
</blockquote>
<blockquote>
<p>Q：第一步的下载的是<code>EA Desktop Installer</code>，为什么第二步是<code>EAappInstaller.exe</code></p>
<p>A：EA的下载链接跳转到EAappInstaller.exe，现在EA Desktop还处于开放测试阶段，不清楚之后会不会修改。</p>
</blockquote>
<blockquote>
<p>Q：为什么我找到的离线完整包是<code>EADesktop-xx.x.xxx.xxxx</code>结尾的？</p>
<p>A：早期的链接的确是这个结尾，后面EA可能修改文件名了，将新版本链接中的的<code>EAapp</code>修改为<code>EADesktop</code>测试是无法获取到资源的。</p>
</blockquote>
<hr>
<p>到此正文已经结束，下面是找到这个链接的过程，仅记录，不对方法有任何补充说明</p>
<hr>
<h2 id="折腾步骤">折腾步骤</h2>
<h3 id="1-找规律">1. 找规律</h3>
<p>一开始从网上收集了一下各位网友发布的离线完整包下载地址，我将链接收集保存下来并发现规律。</p>
<p>完整包的链接样式为<code>https://origin-a.akamaihd.net/EA-Desktop-Client-Download/installer-releases/EADesktop-{version}.msi</code>，这个在后来挖掘文件的时候也发现了这个样式。在第二步中的<code>u0</code>中也发现类似的，使用压缩工具打开，进入<code>u0/.rsrc/EAX_CONFIG/</code>文件夹中的<code>INTEGRATION.CFG</code>，也发现了下面的内容</p>
<pre><code class="language-toml">[updater]
    url = &quot;https://autopatch-integration.juno.ea.com&quot;
[installer]
    downloadurl = &quot;https://origin-a.akamaihd.net/EA-Desktop-Client-Download/installer-releases/EAappInstaller-{version}.exe&quot;
[telemetry]
    ratt.url = &quot;https://ratt-dev.juno.ea.com/ratt/telm&quot;
    pin.url = &quot;https://pin-river-test.data.ea.com/pinEvents&quot;
[machine]
    updateBucket = 999
</code></pre>
<p>可以发现<code>[installer]</code>处有个“格式化”的链接，但是到后面发现这个并不是，只要你带入版本号去下载，其实下载的还是在线安装包，不过EA可能也保存了之前老版本的安装器，毕竟能下载，不过这点没有去验证。</p>
<p>已经知道了链接的方式，那么我从收集来的下载链接中提取出版本号，也就是<code>{version}</code>的内容，并形成一张表（最后一行是最后加的）。</p>
<table>
<thead>
<tr>
<th style="text-align:center">xx</th>
<th style="text-align:center">.x</th>
<th style="text-align:center">.xxx</th>
<th style="text-align:center">.xxxx</th>
<th style="text-align:center">-xxx</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">0</td>
<td style="text-align:center">38</td>
<td style="text-align:center">4820</td>
<td style="text-align:center">153</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">0</td>
<td style="text-align:center">100</td>
<td style="text-align:center">4941</td>
<td style="text-align:center">417</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">0</td>
<td style="text-align:center">113</td>
<td style="text-align:center">4970</td>
<td style="text-align:center">474</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">0</td>
<td style="text-align:center">150</td>
<td style="text-align:center">5030</td>
<td style="text-align:center">639</td>
</tr>
</tbody>
</table>
<p>那么最新的版本号从哪里来？当时我也是突发想法，查看了<code>EAappInstaller.exe</code>的属性，查看这个文件的版本号，得到了<code>12.0.150.5030</code>，最后找到的结果也证实了确实是这个。</p>
<p>但是通过收集的链接会发现还有小尾巴 <code>-xxx</code>，如何得到？我当时通过表格企图找到规律，但是这个值不是简单的规律，只能知道<code>xx.x.xxx.xxxx</code>越大<code>-xxx</code>也越大。</p>
<h3 id="2-获取在线安装器的临时配置文件">2. 获取在线安装器的临时配置文件</h3>
<p>参考<a href="https://answers.ea.com/t5/Bug-Reports-Technical-Issues/Can-t-install-reinstall-EA-Desktop/td-p/9805968">Can't install/reinstall EA Desktop - EA问答</a></p>
<p>按照方法，的确获取到了下载的链接。不过需要运行在线安装器，生成临时的配置文件。</p>
<h3 id="3-网络抓包">3. 网络抓包</h3>
<p>当时想着<code>{version}</code>会不会是通过网络获取的，而这个安装器是一个“通用”的安装器。（这个最后思考了下是不可能的，如果是通用的安装器，那么为什么程序的签名时间是最近的时间）</p>
<p>安装<code>fiddler</code>进行抓包，使用签名获取的版本号进行搜索，复现正常安装流程到下载文件阶段。</p>
<p>发现只有两个匹配的网络请求，最早出现版本号的位置再向更早的时间摸索，并没有发现有请求已经返回版本号的存在，所以当时判断不来源在线。</p>
<h3 id="4-挖掘文件">4. 挖掘文件</h3>
<p>其实之前就一直在翻文件内容，只不过当时没有注意到没有换行，第二步发现的<code>0</code>其实也打开了不止三次，只是最后才更加注意了，发现是个长的单行，当时就打开自动换行功能，发现了链接位置。</p>
<p><s>(其实一直开着搜索版本号把文件都打开了一遍，发现这里有匹配项而已)</s></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://huiaei.github.io/tag/XpFPN67LV/" class="tag">
                    游戏
                  </a>
                
                  <a href="https://huiaei.github.io/tag/9Et6_fM1tZ/" class="tag">
                    EA
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://huiaei.github.io/post/steam-zai-liu-lan-qi-shang-shi-yong-jiao-ben-ling-qu-you-xi/">
                  <h3 class="post-title">
                    Steam 在浏览器上使用脚本领取游戏
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
